package  {	import flash.display.MovieClip;	import flash.events.*	import flash.text.TextField;	import flash.display.Sprite;	import flash.utils.Dictionary;	import org.casalib.*;		import com.greensock.*;	import com.greensock.easing.*;	import com.greensock.events.LoaderEvent;	import com.greensock.loading.*;		import com.greensock.plugins.*;	import org.casalib.layout.Distribution;		public class Selector extends MovieClip	{		//public var specTitleTex:TextField;		//public var mySpecTitle:MovieClip;				private var _loaderMax:LoaderMax;		private var _xml:XML;		private var _dict:Dictionary = new Dictionary();				public function Selector() {			TweenPlugin.activate([TintPlugin]);			loadXML();			this.addEventListener("buttonClicked", buttonClicked);		}				private function loadXML():void {			_loaderMax = new LoaderMax({name:"mainQueue", onComplete:completeHandler});			_loaderMax.append( new XMLLoader("xml/tab2.xml", {name:"xmlDoc"}) );			_loaderMax.load();		}		private function completeHandler(event:LoaderEvent):void {			_xml = LoaderMax.getContent("xmlDoc");			init();			//trace ("_xml " +_xml)		}				private function init(){ 			initTabs();			initSliders();		}				private function buttonClicked(e:Event):void		{			// hide every pages:			for (var k in _dict) 			{				_dict[k].visible = false;			}			// show the selected page:			_dict[e.target.currentType].visible = true;		}				private function createTabsContent(type:String):void {			//trace ("lala " + _xml.tabs.tab.products.length())				//for (var i:Number=0; i<_xml.tabs.tab.length(); i++){			//}									// select all products by type on this page:						var productsPerPage:XMLList =  _xml.tabs.tab.products.productCategory.product.(@type == type);			// create a page to show products:			var myPage:Sprite = new Sprite();			myPage.visible = false;						_dict[type] = myPage;						var dist:Distribution = new Distribution(400);			dist.y = 80;			dist.setMargin(0, 2, 5, 2);			myPage.addChild(dist);			// create products for this page:				for (var i:Number=0; i<productsPerPage.length(); i++)			{				var currentProduct:XML = productsPerPage[i];				// create the product button:				var myProduct:productButton = new productButton(currentProduct);				// add to distribution:				dist.addChild(myProduct);				}			dist.position();			tabs.tab2.addChild(myPage)		}				private function initSliders():void 		{			var yPos:Number = 50;			var textHeight:Number = 0;						for (var i:Number=0; i<_xml.tabs.tab.specsRating.spec.length(); i++)			{				var type:String = _xml.tabs.tab.specsRating.spec[i].@type;				if(type == "title"){					var mySpecTitle:specTitle = new specTitle(_xml.tabs.tab.specsRating.spec[i]);					tabs.tab2.specSlider2.addChild(mySpecTitle);					mySpecTitle.x = 10;					mySpecTitle.y = yPos;					yPos =  yPos + mySpecTitle.height;				} else if (type == "spacer"){					yPos = yPos + 20;				} else 				{					var mySpecButton:specButton = new specButton(_xml.tabs.tab.specsRating.spec[i], type);					tabs.tab2.specSlider2.addChild(mySpecButton);					mySpecButton.x = 10;					mySpecButton.y = yPos;								yPos =  yPos + mySpecButton.height;					createTabsContent(type);				}			}		}				private function initTabs():void {			tabs.tab1.tabTop.addEventListener(MouseEvent.CLICK, switchTab);			tabs.tab2.tabTop.addEventListener(MouseEvent.CLICK, switchTab);			tabs.tab3.tabTop.addEventListener(MouseEvent.CLICK, switchTab);			tabs.tab1.tabTop.useHandCursor = tabs.tab2.tabTop.useHandCursor = tabs.tab3.tabTop.useHandCursor = true;			tabs.tab1.tabTop.buttonMode = tabs.tab2.tabTop.buttonMode = tabs.tab3.tabTop.buttonMode = true;			// change first tab color to white			TweenLite.to(tabs.tab1.tabTop.tabTopBgd, 0, {tint:0xffffff});					}				private function switchTab(event:MouseEvent):void {			var clickedTab:MovieClip = event.currentTarget.parent as MovieClip;			var maxIndex:Number = tabs.numChildren-1;			// move the selected tab to the top			tabs.setChildIndex(clickedTab,maxIndex);						TweenLite.to(tabs.tab1.tabTop.tabTopBgd, .5, {tint:0xf5f5f5}); 			TweenLite.to(tabs.tab2.tabTop.tabTopBgd, .5, {tint:0xf5f5f5}); 			TweenLite.to(tabs.tab3.tabTop.tabTopBgd, .5, {tint:0xf5f5f5}); 					TweenLite.to(clickedTab.tabTop.tabTopBgd, .5, {tint:0xffffff}); 					}			}}